<!--
  Generated template for the AddProductPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <button ion-button color="danger" class="float-right" (click)="deleteItem()" *ngIf="type == 'edit'">
      <ion-icon name="trash" class="white-text"></ion-icon>
    </button>
    <ion-title style="padding-top: 6px !important">{{ type | uppercase }} Product</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding-right>
  <form (ngSubmit)="saveProduct()">
    <ion-item class="form-group">
      <h1>{{ type | uppercase }} Product </h1>
    </ion-item>


    <ion-item class="form-group mr-0">
      <label for="name">Name</label>
      <input class="form-control " [(ngModel)]="data.name" name="name" id="name" required type="text" placeholder="Name" />
    </ion-item>

    <div class="form-group pl-4 mt-2">
      <div class="table-responsive">
        <table class="table table-striped ">
          <thead>
            <th ></th>
            <th>Size</th>
            <th>
              &#x20b9; Cost
            </th>
            <th>Qty
              <small>(pcs.)</small>
            </th>
          </thead>
          <tbody>
            <tr scope="row" *ngFor="let s of data.sizes ; let i = index;">
              <td class="align-middle" style="max-width: 20px;">
                <button type="button" class="btn-sm btn-primary " (click)="removeSize(i)">
                  <ion-icon name="close" class="pt-1"></ion-icon>
                </button>
              </td>
              <td style="max-width : 10%">
                <input class="form-control" [(ngModel)]="s.size" name="s_{{i}}" required type="number" />
              </td>
              <td style="max-width : 20%">
                <div class="input-group mr-sm-2">
                  <input class="form-control p-1 px-2 " [(ngModel)]="s.cost" name="c_{{i}}" required type="number" />
                </div>
              </td>
              <td>
                <div class="input-group mr-sm-2">
                  <input class="form-control p-1 px-2" [(ngModel)]="s.qty" name="q_{{i}}" required type="number" />
                  <div class="input-group-prepend small">
                    <button class="" type="button" (click)="operateQty(s,1)">
                      <ion-icon name="add-circle" class="text-success"></ion-icon>
                    </button>
                    <button class="" type="button" (click)="operateQty(s,-1)">
                      <ion-icon name="remove-circle" class="text-danger"></ion-icon>
                    </button>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td colspan="4">
                <button ion-button class="btn btn-primary float-right mr-0" type="button" (click)="addSize()">++ Size</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <ion-item class="form-group">
      <ion-label>Notes</ion-label>
      <ion-textarea [(ngModel)]="data.notes" name="notes"></ion-textarea>
    </ion-item>

    <div class="form-group p-4">
      <button ion-button class="btn-block" type="submit" block>Save</button>
    </div>
  </form>

</ion-content>